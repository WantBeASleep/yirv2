# Med service

Основная цель этого сервиса - взаимодействие между врачами и пацентами

## Введение в предметную область

Есть следющие множества сущностей:

__Uzi__ _сервис uzi_
__Patient__

У каждого пациента есть набор снимков, отношения `M:N`.

__Doctor__

Доктора связанны с пацентами, отношение `M:N`.

Далее ставится вопрос о ведение записей/динами болезни и прочего о пациенте, обозначим это как __Card__

Для начала рассмотрим диагнозы и записи по пациенту (не по узи снимкам)

1) __Card__ относится к __Patient__ как _1:1_, тогда 

__Card__ это общий диагноз/любая другая МЕД инфа (разграничение с __Patient__ дает нам возможность отделить мед инфу от остальной (например полис/фио/прочее))

Проблемы: Если 1 __Patient__ у 2 врачей, врачи будут менять заключения друг друга - очевидно проблемы с перекрестными изменениями.

Плюсы: Врачи видят диагнозы друг друга

2) __Card__ выражает связь между __Doctor__ и __Patient__.

// TODO: нужно добавить ручку промотра кард этого пациента от других врачей, можно в обезличенном ввиде

__Card__ в таком случае релизует связь между __Doctor__ __Patient__ + выделяет мед информацию

## Tech
### Сущности, их отношения, ручки

#### Doctor

__Doctor__: это сущность описывающая самого врача, а не его аккаунт. По сути это его мед принадлежность Org && Job.

Структура:
* id - Совпадает с id _user из user service_
* FullName _ФИО_
* Org _Учесть вынос в отдельную табличку_
* Job _Должность_

+ /registerDoctor
    - -> id, fullname, org, job
Регистрация будет осуществоляться из __Auth service__, значит потребуется распределенная транзакция для регистрации.

#### Patient

__Patient__: эта сущность описывающая личные данные пациента

Структура:
* id 
* FullName   
* Email  
* Policy _мед полис_

+ /createPatient
    - -> fullname, email, policy
    - <- id
__СИЛЬНО ОТЛИЧАЕТСЯ ОТ СТАРЫХ РУЧЕК__
Сначала создаем пациента, и потом на него подвязываем врачей.

Альтернатива при добавления снимка проверять полис на уникальность, но теже яйца только с скрытой логикой - не вижу смысла в этом



